From 0ad635433eb4f3f53a475be1bdbbc725ebffaa8f Mon Sep 17 00:00:00 2001
From: Gregory Kramida <gregory.kramida@presagetech.com>
Date: Fri, 23 Aug 2024 17:49:06 -0400
Subject: [PATCH] fix(StatusSetErrMsg): fix mixuse of strncpy

---
 upb/upb.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/upb/upb.c b/upb/upb.c
index 266ea7d7..4befd414 100644
--- a/upb/upb.c
+++ b/upb/upb.c
@@ -37,7 +37,7 @@ const char *upb_status_errmsg(const upb_status *status) { return status->msg; }
 void upb_status_seterrmsg(upb_status *status, const char *msg) {
   if (!status) return;
   status->ok = false;
-  strncpy(status->msg, msg, sizeof(status->msg));
+  strncpy(status->msg, msg, sizeof(status->msg) - 1);
   nullz(status);
 }
 
-- 
2.34.1

